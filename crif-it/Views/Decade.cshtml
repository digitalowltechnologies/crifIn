@using Crif.It.Models;
@using Umbraco.Cms.Web.Common.PublishedModels;
@using Crif.It.Utils;
@using ContentModels = Crif.It.Models;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Decade>
@{
	Layout = "Master.cshtml";

}
@if (Model.Parent != null)
{
	Crif.It.Models.History parentHistory = (Crif.It.Models.History)Model.Parent;
	<section class="textonly-heading pb-lg-3">
		<div class="container-lg">
			<div class="row">
				<div class="col-12 banner">
					<div class="caption">
						@await(Html.PartialAsync("Breadcrumb", parentHistory))
						<h1 class="h1 fade-in-box">@parentHistory.HistoryTitle</h1>
						<p class="big-text fade-in-box">@parentHistory.HistoryDescription</p>
					</div>
				</div>
			</div>
		</div>
	</section>
}

@{
	var decades = Model.SiblingsAndSelf();
}
@if (decades != null && decades.Any())
{
	<div class="decade-banner">
		<section class="internal-navigation mt-3 mt-lg-5">
			<div class="container-lg">
				<div class="row">
					<div class="col-12">
						<nav>
							<ul class="internal-menu">
								@foreach (var decade in decades.OrderByDescending(decades => decades.Name))
								{
									var current = (decade.Name == Model.Name) ? "current" : "";
									<li class="nav-item @current"><a title="@decade.Name" href="@decade.Url()" class="nav-link">@decade.Name</a></li>
								}
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</section>
		@if (Model.Blocks != null && Model.Blocks.Any())
		{
			List<int> allYears = new List<int>();
			foreach (var block in Model.Blocks)
			{
				var blockName = block.Content.ContentType.Alias;
				if (blockName == "blockYearNews")
				{
					ContentModels.BlockYearNews yearContent = (ContentModels.BlockYearNews)block.Content;
					allYears.Add(yearContent.Year);
				}
			}

			if (allYears != null && allYears.Any())
			{
				<section class="internal-navigation sticky-top dark">
					<div class="container-lg">
						<div class="row">
							<div class="col-12">
								<nav>
									<ul class="internal-menu">
										@{
											var current = "current";
										}
										@foreach (var y in allYears)
										{
											<li class="nav-item internal-link @current"><a title="@y" href="#y-@y" class="nav-link">@y</a></li>
											current = "";
										}
									</ul>
								</nav>
							</div>
						</div>
					</div>
				</section>
			}
		}
	</div>
}


@Html.GetBlockListHtml(Model.Blocks)